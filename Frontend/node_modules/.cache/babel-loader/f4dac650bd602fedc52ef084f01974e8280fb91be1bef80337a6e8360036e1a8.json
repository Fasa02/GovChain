{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { BaseLoggger, Html5QrcodeResultFactory, Html5QrcodeErrorFactory, Html5QrcodeSupportedFormats, isValidHtml5QrcodeSupportedFormats, Html5QrcodeConstants, isNullOrUndefined } from \"./core\";\nimport { Html5QrcodeStrings } from \"./strings\";\nimport { VideoConstraintsUtil } from \"./utils\";\nimport { Html5QrcodeShim } from \"./code-decoder\";\nimport { CameraFactory } from \"./camera/factories\";\nimport { CameraRetriever } from \"./camera/retriever\";\nimport { StateManagerFactory, Html5QrcodeScannerState } from \"./state-manager\";\nvar Constants = function (_super) {\n  __extends(Constants, _super);\n  function Constants() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Constants.DEFAULT_WIDTH = 300;\n  Constants.DEFAULT_WIDTH_OFFSET = 2;\n  Constants.FILE_SCAN_MIN_HEIGHT = 300;\n  Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING = 100;\n  Constants.MIN_QR_BOX_SIZE = 50;\n  Constants.SHADED_LEFT = 1;\n  Constants.SHADED_RIGHT = 2;\n  Constants.SHADED_TOP = 3;\n  Constants.SHADED_BOTTOM = 4;\n  Constants.SHADED_REGION_ELEMENT_ID = \"qr-shaded-region\";\n  Constants.VERBOSE = false;\n  Constants.BORDER_SHADER_DEFAULT_COLOR = \"#ffffff\";\n  Constants.BORDER_SHADER_MATCH_COLOR = \"rgb(90, 193, 56)\";\n  return Constants;\n}(Html5QrcodeConstants);\nvar InternalHtml5QrcodeConfig = function () {\n  function InternalHtml5QrcodeConfig(config, logger) {\n    this.logger = logger;\n    this.fps = Constants.SCAN_DEFAULT_FPS;\n    if (!config) {\n      this.disableFlip = Constants.DEFAULT_DISABLE_FLIP;\n    } else {\n      if (config.fps) {\n        this.fps = config.fps;\n      }\n      this.disableFlip = config.disableFlip === true;\n      this.qrbox = config.qrbox;\n      this.aspectRatio = config.aspectRatio;\n      this.videoConstraints = config.videoConstraints;\n    }\n  }\n  InternalHtml5QrcodeConfig.prototype.isMediaStreamConstraintsValid = function () {\n    if (!this.videoConstraints) {\n      this.logger.logError(\"Empty videoConstraints\", true);\n      return false;\n    }\n    return VideoConstraintsUtil.isMediaStreamConstraintsValid(this.videoConstraints, this.logger);\n  };\n  InternalHtml5QrcodeConfig.prototype.isShadedBoxEnabled = function () {\n    return !isNullOrUndefined(this.qrbox);\n  };\n  InternalHtml5QrcodeConfig.create = function (config, logger) {\n    return new InternalHtml5QrcodeConfig(config, logger);\n  };\n  return InternalHtml5QrcodeConfig;\n}();\nvar Html5Qrcode = function () {\n  function Html5Qrcode(elementId, configOrVerbosityFlag) {\n    this.element = null;\n    this.canvasElement = null;\n    this.scannerPausedUiElement = null;\n    this.hasBorderShaders = null;\n    this.borderShaders = null;\n    this.qrMatch = null;\n    this.renderedCamera = null;\n    this.qrRegion = null;\n    this.context = null;\n    this.lastScanImageFile = null;\n    this.isScanning = false;\n    if (!document.getElementById(elementId)) {\n      throw \"HTML Element with id=\" + elementId + \" not found\";\n    }\n    this.elementId = elementId;\n    this.verbose = false;\n    var experimentalFeatureConfig;\n    var configObject;\n    if (typeof configOrVerbosityFlag == \"boolean\") {\n      this.verbose = configOrVerbosityFlag === true;\n    } else if (configOrVerbosityFlag) {\n      configObject = configOrVerbosityFlag;\n      this.verbose = configObject.verbose === true;\n      experimentalFeatureConfig = configObject.experimentalFeatures;\n    }\n    this.logger = new BaseLoggger(this.verbose);\n    this.qrcode = new Html5QrcodeShim(this.getSupportedFormats(configOrVerbosityFlag), this.getUseBarCodeDetectorIfSupported(configObject), this.verbose, this.logger);\n    this.foreverScanTimeout;\n    this.shouldScan = true;\n    this.stateManagerProxy = StateManagerFactory.create();\n  }\n  Html5Qrcode.prototype.start = function (cameraIdOrConfig, configuration, qrCodeSuccessCallback, qrCodeErrorCallback) {\n    var _this = this;\n    if (!cameraIdOrConfig) {\n      throw \"cameraIdOrConfig is required\";\n    }\n    if (!qrCodeSuccessCallback || typeof qrCodeSuccessCallback != \"function\") {\n      throw \"qrCodeSuccessCallback is required and should be a function.\";\n    }\n    var qrCodeErrorCallbackInternal;\n    if (qrCodeErrorCallback) {\n      qrCodeErrorCallbackInternal = qrCodeErrorCallback;\n    } else {\n      qrCodeErrorCallbackInternal = this.verbose ? this.logger.log : function () {};\n    }\n    var internalConfig = InternalHtml5QrcodeConfig.create(configuration, this.logger);\n    this.clearElement();\n    var videoConstraintsAvailableAndValid = false;\n    if (internalConfig.videoConstraints) {\n      if (!internalConfig.isMediaStreamConstraintsValid()) {\n        this.logger.logError(\"'videoConstraints' is not valid 'MediaStreamConstraints, \" + \"it will be ignored.'\", true);\n      } else {\n        videoConstraintsAvailableAndValid = true;\n      }\n    }\n    var areVideoConstraintsEnabled = videoConstraintsAvailableAndValid;\n    var element = document.getElementById(this.elementId);\n    var rootElementWidth = element.clientWidth ? element.clientWidth : Constants.DEFAULT_WIDTH;\n    element.style.position = \"relative\";\n    this.shouldScan = true;\n    this.element = element;\n    var $this = this;\n    var toScanningStateChangeTransaction = this.stateManagerProxy.startTransition(Html5QrcodeScannerState.SCANNING);\n    return new Promise(function (resolve, reject) {\n      var videoConstraints = areVideoConstraintsEnabled ? internalConfig.videoConstraints : $this.createVideoConstraints(cameraIdOrConfig);\n      if (!videoConstraints) {\n        toScanningStateChangeTransaction.cancel();\n        reject(\"videoConstraints should be defined\");\n        return;\n      }\n      var cameraRenderingOptions = {};\n      if (!areVideoConstraintsEnabled || internalConfig.aspectRatio) {\n        cameraRenderingOptions.aspectRatio = internalConfig.aspectRatio;\n      }\n      var renderingCallbacks = {\n        onRenderSurfaceReady: function (viewfinderWidth, viewfinderHeight) {\n          $this.setupUi(viewfinderWidth, viewfinderHeight, internalConfig);\n          $this.isScanning = true;\n          $this.foreverScan(internalConfig, qrCodeSuccessCallback, qrCodeErrorCallbackInternal);\n        }\n      };\n      CameraFactory.failIfNotSupported().then(function (factory) {\n        factory.create(videoConstraints).then(function (camera) {\n          return camera.render(_this.element, cameraRenderingOptions, renderingCallbacks).then(function (renderedCamera) {\n            $this.renderedCamera = renderedCamera;\n            toScanningStateChangeTransaction.execute();\n            resolve(null);\n          }).catch(function (error) {\n            toScanningStateChangeTransaction.cancel();\n            reject(error);\n          });\n        }).catch(function (error) {\n          toScanningStateChangeTransaction.cancel();\n          reject(Html5QrcodeStrings.errorGettingUserMedia(error));\n        });\n      }).catch(function (_) {\n        toScanningStateChangeTransaction.cancel();\n        reject(Html5QrcodeStrings.cameraStreamingNotSupported());\n      });\n    });\n  };\n  Html5Qrcode.prototype.pause = function (shouldPauseVideo) {\n    if (!this.stateManagerProxy.isStrictlyScanning()) {\n      throw \"Cannot pause, scanner is not scanning.\";\n    }\n    this.stateManagerProxy.directTransition(Html5QrcodeScannerState.PAUSED);\n    this.showPausedState();\n    if (isNullOrUndefined(shouldPauseVideo) || shouldPauseVideo !== true) {\n      shouldPauseVideo = false;\n    }\n    if (shouldPauseVideo && this.renderedCamera) {\n      this.renderedCamera.pause();\n    }\n  };\n  Html5Qrcode.prototype.resume = function () {\n    if (!this.stateManagerProxy.isPaused()) {\n      throw \"Cannot result, scanner is not paused.\";\n    }\n    if (!this.renderedCamera) {\n      throw \"renderedCamera doesn't exist while trying resume()\";\n    }\n    var $this = this;\n    var transitionToScanning = function () {\n      $this.stateManagerProxy.directTransition(Html5QrcodeScannerState.SCANNING);\n      $this.hidePausedState();\n    };\n    if (!this.renderedCamera.isPaused()) {\n      transitionToScanning();\n      return;\n    }\n    this.renderedCamera.resume(function () {\n      transitionToScanning();\n    });\n  };\n  Html5Qrcode.prototype.getState = function () {\n    return this.stateManagerProxy.getState();\n  };\n  Html5Qrcode.prototype.stop = function () {\n    var _this = this;\n    if (!this.stateManagerProxy.isScanning()) {\n      throw \"Cannot stop, scanner is not running or paused.\";\n    }\n    var toStoppedStateTransaction = this.stateManagerProxy.startTransition(Html5QrcodeScannerState.NOT_STARTED);\n    this.shouldScan = false;\n    if (this.foreverScanTimeout) {\n      clearTimeout(this.foreverScanTimeout);\n    }\n    var removeQrRegion = function () {\n      if (!_this.element) {\n        return;\n      }\n      var childElement = document.getElementById(Constants.SHADED_REGION_ELEMENT_ID);\n      if (childElement) {\n        _this.element.removeChild(childElement);\n      }\n    };\n    var $this = this;\n    return this.renderedCamera.close().then(function () {\n      $this.renderedCamera = null;\n      if ($this.element) {\n        $this.element.removeChild($this.canvasElement);\n        $this.canvasElement = null;\n      }\n      removeQrRegion();\n      if ($this.qrRegion) {\n        $this.qrRegion = null;\n      }\n      if ($this.context) {\n        $this.context = null;\n      }\n      toStoppedStateTransaction.execute();\n      $this.hidePausedState();\n      $this.isScanning = false;\n      return Promise.resolve();\n    });\n  };\n  Html5Qrcode.prototype.scanFile = function (imageFile, showImage) {\n    return this.scanFileV2(imageFile, showImage).then(function (html5qrcodeResult) {\n      return html5qrcodeResult.decodedText;\n    });\n  };\n  Html5Qrcode.prototype.scanFileV2 = function (imageFile, showImage) {\n    var _this = this;\n    if (!imageFile || !(imageFile instanceof File)) {\n      throw \"imageFile argument is mandatory and should be instance \" + \"of File. Use 'event.target.files[0]'.\";\n    }\n    if (isNullOrUndefined(showImage)) {\n      showImage = true;\n    }\n    if (!this.stateManagerProxy.canScanFile()) {\n      throw \"Cannot start file scan - ongoing camera scan\";\n    }\n    return new Promise(function (resolve, reject) {\n      _this.possiblyCloseLastScanImageFile();\n      _this.clearElement();\n      _this.lastScanImageFile = URL.createObjectURL(imageFile);\n      var inputImage = new Image();\n      inputImage.onload = function () {\n        var imageWidth = inputImage.width;\n        var imageHeight = inputImage.height;\n        var element = document.getElementById(_this.elementId);\n        var containerWidth = element.clientWidth ? element.clientWidth : Constants.DEFAULT_WIDTH;\n        var containerHeight = Math.max(element.clientHeight ? element.clientHeight : imageHeight, Constants.FILE_SCAN_MIN_HEIGHT);\n        var config = _this.computeCanvasDrawConfig(imageWidth, imageHeight, containerWidth, containerHeight);\n        if (showImage) {\n          var visibleCanvas = _this.createCanvasElement(containerWidth, containerHeight, \"qr-canvas-visible\");\n          visibleCanvas.style.display = \"inline-block\";\n          element.appendChild(visibleCanvas);\n          var context_1 = visibleCanvas.getContext(\"2d\");\n          if (!context_1) {\n            throw \"Unable to get 2d context from canvas\";\n          }\n          context_1.canvas.width = containerWidth;\n          context_1.canvas.height = containerHeight;\n          context_1.drawImage(inputImage, 0, 0, imageWidth, imageHeight, config.x, config.y, config.width, config.height);\n        }\n        var padding = Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING;\n        var hiddenImageWidth = Math.max(inputImage.width, config.width);\n        var hiddenImageHeight = Math.max(inputImage.height, config.height);\n        var hiddenCanvasWidth = hiddenImageWidth + 2 * padding;\n        var hiddenCanvasHeight = hiddenImageHeight + 2 * padding;\n        var hiddenCanvas = _this.createCanvasElement(hiddenCanvasWidth, hiddenCanvasHeight);\n        element.appendChild(hiddenCanvas);\n        var context = hiddenCanvas.getContext(\"2d\");\n        if (!context) {\n          throw \"Unable to get 2d context from canvas\";\n        }\n        context.canvas.width = hiddenCanvasWidth;\n        context.canvas.height = hiddenCanvasHeight;\n        context.drawImage(inputImage, 0, 0, imageWidth, imageHeight, padding, padding, hiddenImageWidth, hiddenImageHeight);\n        try {\n          _this.qrcode.decodeRobustlyAsync(hiddenCanvas).then(function (result) {\n            resolve(Html5QrcodeResultFactory.createFromQrcodeResult(result));\n          }).catch(reject);\n        } catch (exception) {\n          reject(\"QR code parse error, error = \" + exception);\n        }\n      };\n      inputImage.onerror = reject;\n      inputImage.onabort = reject;\n      inputImage.onstalled = reject;\n      inputImage.onsuspend = reject;\n      inputImage.src = URL.createObjectURL(imageFile);\n    });\n  };\n  Html5Qrcode.prototype.clear = function () {\n    this.clearElement();\n  };\n  Html5Qrcode.getCameras = function () {\n    return CameraRetriever.retrieve();\n  };\n  Html5Qrcode.prototype.getRunningTrackCapabilities = function () {\n    return this.getRenderedCameraOrFail().getRunningTrackCapabilities();\n  };\n  Html5Qrcode.prototype.getRunningTrackSettings = function () {\n    return this.getRenderedCameraOrFail().getRunningTrackSettings();\n  };\n  Html5Qrcode.prototype.getRunningTrackCameraCapabilities = function () {\n    return this.getRenderedCameraOrFail().getCapabilities();\n  };\n  Html5Qrcode.prototype.applyVideoConstraints = function (videoConstaints) {\n    if (!videoConstaints) {\n      throw \"videoConstaints is required argument.\";\n    } else if (!VideoConstraintsUtil.isMediaStreamConstraintsValid(videoConstaints, this.logger)) {\n      throw \"invalid videoConstaints passed, check logs for more details\";\n    }\n    return this.getRenderedCameraOrFail().applyVideoConstraints(videoConstaints);\n  };\n  Html5Qrcode.prototype.getRenderedCameraOrFail = function () {\n    if (this.renderedCamera == null) {\n      throw \"Scanning is not in running state, call this API only when\" + \" QR code scanning using camera is in running state.\";\n    }\n    return this.renderedCamera;\n  };\n  Html5Qrcode.prototype.getSupportedFormats = function (configOrVerbosityFlag) {\n    var allFormats = [Html5QrcodeSupportedFormats.QR_CODE, Html5QrcodeSupportedFormats.AZTEC, Html5QrcodeSupportedFormats.CODABAR, Html5QrcodeSupportedFormats.CODE_39, Html5QrcodeSupportedFormats.CODE_93, Html5QrcodeSupportedFormats.CODE_128, Html5QrcodeSupportedFormats.DATA_MATRIX, Html5QrcodeSupportedFormats.MAXICODE, Html5QrcodeSupportedFormats.ITF, Html5QrcodeSupportedFormats.EAN_13, Html5QrcodeSupportedFormats.EAN_8, Html5QrcodeSupportedFormats.PDF_417, Html5QrcodeSupportedFormats.RSS_14, Html5QrcodeSupportedFormats.RSS_EXPANDED, Html5QrcodeSupportedFormats.UPC_A, Html5QrcodeSupportedFormats.UPC_E, Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION];\n    if (!configOrVerbosityFlag || typeof configOrVerbosityFlag == \"boolean\") {\n      return allFormats;\n    }\n    if (!configOrVerbosityFlag.formatsToSupport) {\n      return allFormats;\n    }\n    if (!Array.isArray(configOrVerbosityFlag.formatsToSupport)) {\n      throw \"configOrVerbosityFlag.formatsToSupport should be undefined \" + \"or an array.\";\n    }\n    if (configOrVerbosityFlag.formatsToSupport.length === 0) {\n      throw \"Atleast 1 formatsToSupport is needed.\";\n    }\n    var supportedFormats = [];\n    for (var _i = 0, _a = configOrVerbosityFlag.formatsToSupport; _i < _a.length; _i++) {\n      var format = _a[_i];\n      if (isValidHtml5QrcodeSupportedFormats(format)) {\n        supportedFormats.push(format);\n      } else {\n        this.logger.warn(\"Invalid format: \" + format + \" passed in config, ignoring.\");\n      }\n    }\n    if (supportedFormats.length === 0) {\n      throw \"None of formatsToSupport match supported values.\";\n    }\n    return supportedFormats;\n  };\n  Html5Qrcode.prototype.getUseBarCodeDetectorIfSupported = function (config) {\n    if (isNullOrUndefined(config)) {\n      return true;\n    }\n    if (!isNullOrUndefined(config.useBarCodeDetectorIfSupported)) {\n      return config.useBarCodeDetectorIfSupported !== false;\n    }\n    if (isNullOrUndefined(config.experimentalFeatures)) {\n      return true;\n    }\n    var experimentalFeatures = config.experimentalFeatures;\n    if (isNullOrUndefined(experimentalFeatures.useBarCodeDetectorIfSupported)) {\n      return true;\n    }\n    return experimentalFeatures.useBarCodeDetectorIfSupported !== false;\n  };\n  Html5Qrcode.prototype.validateQrboxSize = function (viewfinderWidth, viewfinderHeight, internalConfig) {\n    var _this = this;\n    var qrboxSize = internalConfig.qrbox;\n    this.validateQrboxConfig(qrboxSize);\n    var qrDimensions = this.toQrdimensions(viewfinderWidth, viewfinderHeight, qrboxSize);\n    var validateMinSize = function (size) {\n      if (size < Constants.MIN_QR_BOX_SIZE) {\n        throw \"minimum size of 'config.qrbox' dimension value is\" + (\" \" + Constants.MIN_QR_BOX_SIZE + \"px.\");\n      }\n    };\n    var correctWidthBasedOnRootElementSize = function (configWidth) {\n      if (configWidth > viewfinderWidth) {\n        _this.logger.warn(\"`qrbox.width` or `qrbox` is larger than the\" + \" width of the root element. The width will be truncated\" + \" to the width of root element.\");\n        configWidth = viewfinderWidth;\n      }\n      return configWidth;\n    };\n    validateMinSize(qrDimensions.width);\n    validateMinSize(qrDimensions.height);\n    qrDimensions.width = correctWidthBasedOnRootElementSize(qrDimensions.width);\n  };\n  Html5Qrcode.prototype.validateQrboxConfig = function (qrboxSize) {\n    if (typeof qrboxSize === \"number\") {\n      return;\n    }\n    if (typeof qrboxSize === \"function\") {\n      return;\n    }\n    if (qrboxSize.width === undefined || qrboxSize.height === undefined) {\n      throw \"Invalid instance of QrDimensions passed for \" + \"'config.qrbox'. Both 'width' and 'height' should be set.\";\n    }\n  };\n  Html5Qrcode.prototype.toQrdimensions = function (viewfinderWidth, viewfinderHeight, qrboxSize) {\n    if (typeof qrboxSize === \"number\") {\n      return {\n        width: qrboxSize,\n        height: qrboxSize\n      };\n    } else if (typeof qrboxSize === \"function\") {\n      try {\n        return qrboxSize(viewfinderWidth, viewfinderHeight);\n      } catch (error) {\n        throw new Error(\"qrbox config was passed as a function but it failed with \" + \"unknown error\" + error);\n      }\n    }\n    return qrboxSize;\n  };\n  Html5Qrcode.prototype.setupUi = function (viewfinderWidth, viewfinderHeight, internalConfig) {\n    if (internalConfig.isShadedBoxEnabled()) {\n      this.validateQrboxSize(viewfinderWidth, viewfinderHeight, internalConfig);\n    }\n    var qrboxSize = isNullOrUndefined(internalConfig.qrbox) ? {\n      width: viewfinderWidth,\n      height: viewfinderHeight\n    } : internalConfig.qrbox;\n    this.validateQrboxConfig(qrboxSize);\n    var qrDimensions = this.toQrdimensions(viewfinderWidth, viewfinderHeight, qrboxSize);\n    if (qrDimensions.height > viewfinderHeight) {\n      this.logger.warn(\"[Html5Qrcode] config.qrbox has height that is\" + \"greater than the height of the video stream. Shading will be\" + \" ignored\");\n    }\n    var shouldShadingBeApplied = internalConfig.isShadedBoxEnabled() && qrDimensions.height <= viewfinderHeight;\n    var defaultQrRegion = {\n      x: 0,\n      y: 0,\n      width: viewfinderWidth,\n      height: viewfinderHeight\n    };\n    var qrRegion = shouldShadingBeApplied ? this.getShadedRegionBounds(viewfinderWidth, viewfinderHeight, qrDimensions) : defaultQrRegion;\n    var canvasElement = this.createCanvasElement(qrRegion.width, qrRegion.height);\n    var contextAttributes = {\n      willReadFrequently: true\n    };\n    var context = canvasElement.getContext(\"2d\", contextAttributes);\n    context.canvas.width = qrRegion.width;\n    context.canvas.height = qrRegion.height;\n    this.element.append(canvasElement);\n    if (shouldShadingBeApplied) {\n      this.possiblyInsertShadingElement(this.element, viewfinderWidth, viewfinderHeight, qrDimensions);\n    }\n    this.createScannerPausedUiElement(this.element);\n    this.qrRegion = qrRegion;\n    this.context = context;\n    this.canvasElement = canvasElement;\n  };\n  Html5Qrcode.prototype.createScannerPausedUiElement = function (rootElement) {\n    var scannerPausedUiElement = document.createElement(\"div\");\n    scannerPausedUiElement.innerText = \"Scanner paused\";\n    scannerPausedUiElement.style.display = \"none\";\n    scannerPausedUiElement.style.position = \"absolute\";\n    scannerPausedUiElement.style.top = \"0px\";\n    scannerPausedUiElement.style.zIndex = \"1\";\n    scannerPausedUiElement.style.background = \"yellow\";\n    scannerPausedUiElement.style.textAlign = \"center\";\n    scannerPausedUiElement.style.width = \"100%\";\n    rootElement.appendChild(scannerPausedUiElement);\n    this.scannerPausedUiElement = scannerPausedUiElement;\n  };\n  Html5Qrcode.prototype.scanContext = function (qrCodeSuccessCallback, qrCodeErrorCallback) {\n    var _this = this;\n    if (this.stateManagerProxy.isPaused()) {\n      return Promise.resolve(false);\n    }\n    return this.qrcode.decodeAsync(this.canvasElement).then(function (result) {\n      qrCodeSuccessCallback(result.text, Html5QrcodeResultFactory.createFromQrcodeResult(result));\n      _this.possiblyUpdateShaders(true);\n      return true;\n    }).catch(function (error) {\n      _this.possiblyUpdateShaders(false);\n      var errorMessage = Html5QrcodeStrings.codeParseError(error);\n      qrCodeErrorCallback(errorMessage, Html5QrcodeErrorFactory.createFrom(errorMessage));\n      return false;\n    });\n  };\n  Html5Qrcode.prototype.foreverScan = function (internalConfig, qrCodeSuccessCallback, qrCodeErrorCallback) {\n    var _this = this;\n    if (!this.shouldScan) {\n      return;\n    }\n    if (!this.renderedCamera) {\n      return;\n    }\n    var videoElement = this.renderedCamera.getSurface();\n    var widthRatio = videoElement.videoWidth / videoElement.clientWidth;\n    var heightRatio = videoElement.videoHeight / videoElement.clientHeight;\n    if (!this.qrRegion) {\n      throw \"qrRegion undefined when localMediaStream is ready.\";\n    }\n    var sWidthOffset = this.qrRegion.width * widthRatio;\n    var sHeightOffset = this.qrRegion.height * heightRatio;\n    var sxOffset = this.qrRegion.x * widthRatio;\n    var syOffset = this.qrRegion.y * heightRatio;\n    this.context.drawImage(videoElement, sxOffset, syOffset, sWidthOffset, sHeightOffset, 0, 0, this.qrRegion.width, this.qrRegion.height);\n    var triggerNextScan = function () {\n      _this.foreverScanTimeout = setTimeout(function () {\n        _this.foreverScan(internalConfig, qrCodeSuccessCallback, qrCodeErrorCallback);\n      }, _this.getTimeoutFps(internalConfig.fps));\n    };\n    this.scanContext(qrCodeSuccessCallback, qrCodeErrorCallback).then(function (isSuccessfull) {\n      if (!isSuccessfull && internalConfig.disableFlip !== true) {\n        _this.context.translate(_this.context.canvas.width, 0);\n        _this.context.scale(-1, 1);\n        _this.scanContext(qrCodeSuccessCallback, qrCodeErrorCallback).finally(function () {\n          triggerNextScan();\n        });\n      } else {\n        triggerNextScan();\n      }\n    }).catch(function (error) {\n      _this.logger.logError(\"Error happend while scanning context\", error);\n      triggerNextScan();\n    });\n  };\n  Html5Qrcode.prototype.createVideoConstraints = function (cameraIdOrConfig) {\n    if (typeof cameraIdOrConfig == \"string\") {\n      return {\n        deviceId: {\n          exact: cameraIdOrConfig\n        }\n      };\n    } else if (typeof cameraIdOrConfig == \"object\") {\n      var facingModeKey = \"facingMode\";\n      var deviceIdKey = \"deviceId\";\n      var allowedFacingModeValues_1 = {\n        \"user\": true,\n        \"environment\": true\n      };\n      var exactKey = \"exact\";\n      var isValidFacingModeValue = function (value) {\n        if (value in allowedFacingModeValues_1) {\n          return true;\n        } else {\n          throw \"config has invalid 'facingMode' value = \" + (\"'\" + value + \"'\");\n        }\n      };\n      var keys = Object.keys(cameraIdOrConfig);\n      if (keys.length !== 1) {\n        throw \"'cameraIdOrConfig' object should have exactly 1 key,\" + (\" if passed as an object, found \" + keys.length + \" keys\");\n      }\n      var key = Object.keys(cameraIdOrConfig)[0];\n      if (key !== facingModeKey && key !== deviceIdKey) {\n        throw \"Only '\" + facingModeKey + \"' and '\" + deviceIdKey + \"' \" + \" are supported for 'cameraIdOrConfig'\";\n      }\n      if (key === facingModeKey) {\n        var facingMode = cameraIdOrConfig.facingMode;\n        if (typeof facingMode == \"string\") {\n          if (isValidFacingModeValue(facingMode)) {\n            return {\n              facingMode: facingMode\n            };\n          }\n        } else if (typeof facingMode == \"object\") {\n          if (exactKey in facingMode) {\n            if (isValidFacingModeValue(facingMode[\"\" + exactKey])) {\n              return {\n                facingMode: {\n                  exact: facingMode[\"\" + exactKey]\n                }\n              };\n            }\n          } else {\n            throw \"'facingMode' should be string or object with\" + (\" \" + exactKey + \" as key.\");\n          }\n        } else {\n          var type_1 = typeof facingMode;\n          throw \"Invalid type of 'facingMode' = \" + type_1;\n        }\n      } else {\n        var deviceId = cameraIdOrConfig.deviceId;\n        if (typeof deviceId == \"string\") {\n          return {\n            deviceId: deviceId\n          };\n        } else if (typeof deviceId == \"object\") {\n          if (exactKey in deviceId) {\n            return {\n              deviceId: {\n                exact: deviceId[\"\" + exactKey]\n              }\n            };\n          } else {\n            throw \"'deviceId' should be string or object with\" + (\" \" + exactKey + \" as key.\");\n          }\n        } else {\n          var type_2 = typeof deviceId;\n          throw \"Invalid type of 'deviceId' = \" + type_2;\n        }\n      }\n    }\n    var type = typeof cameraIdOrConfig;\n    throw \"Invalid type of 'cameraIdOrConfig' = \" + type;\n  };\n  Html5Qrcode.prototype.computeCanvasDrawConfig = function (imageWidth, imageHeight, containerWidth, containerHeight) {\n    if (imageWidth <= containerWidth && imageHeight <= containerHeight) {\n      var xoffset = (containerWidth - imageWidth) / 2;\n      var yoffset = (containerHeight - imageHeight) / 2;\n      return {\n        x: xoffset,\n        y: yoffset,\n        width: imageWidth,\n        height: imageHeight\n      };\n    } else {\n      var formerImageWidth = imageWidth;\n      var formerImageHeight = imageHeight;\n      if (imageWidth > containerWidth) {\n        imageHeight = containerWidth / imageWidth * imageHeight;\n        imageWidth = containerWidth;\n      }\n      if (imageHeight > containerHeight) {\n        imageWidth = containerHeight / imageHeight * imageWidth;\n        imageHeight = containerHeight;\n      }\n      this.logger.log(\"Image downsampled from \" + (formerImageWidth + \"X\" + formerImageHeight) + (\" to \" + imageWidth + \"X\" + imageHeight + \".\"));\n      return this.computeCanvasDrawConfig(imageWidth, imageHeight, containerWidth, containerHeight);\n    }\n  };\n  Html5Qrcode.prototype.clearElement = function () {\n    if (this.stateManagerProxy.isScanning()) {\n      throw \"Cannot clear while scan is ongoing, close it first.\";\n    }\n    var element = document.getElementById(this.elementId);\n    if (element) {\n      element.innerHTML = \"\";\n    }\n  };\n  Html5Qrcode.prototype.possiblyUpdateShaders = function (qrMatch) {\n    if (this.qrMatch === qrMatch) {\n      return;\n    }\n    if (this.hasBorderShaders && this.borderShaders && this.borderShaders.length) {\n      this.borderShaders.forEach(function (shader) {\n        shader.style.backgroundColor = qrMatch ? Constants.BORDER_SHADER_MATCH_COLOR : Constants.BORDER_SHADER_DEFAULT_COLOR;\n      });\n    }\n    this.qrMatch = qrMatch;\n  };\n  Html5Qrcode.prototype.possiblyCloseLastScanImageFile = function () {\n    if (this.lastScanImageFile) {\n      URL.revokeObjectURL(this.lastScanImageFile);\n      this.lastScanImageFile = null;\n    }\n  };\n  Html5Qrcode.prototype.createCanvasElement = function (width, height, customId) {\n    var canvasWidth = width;\n    var canvasHeight = height;\n    var canvasElement = document.createElement(\"canvas\");\n    canvasElement.style.width = canvasWidth + \"px\";\n    canvasElement.style.height = canvasHeight + \"px\";\n    canvasElement.style.display = \"none\";\n    canvasElement.id = isNullOrUndefined(customId) ? \"qr-canvas\" : customId;\n    return canvasElement;\n  };\n  Html5Qrcode.prototype.getShadedRegionBounds = function (width, height, qrboxSize) {\n    if (qrboxSize.width > width || qrboxSize.height > height) {\n      throw \"'config.qrbox' dimensions should not be greater than the \" + \"dimensions of the root HTML element.\";\n    }\n    return {\n      x: (width - qrboxSize.width) / 2,\n      y: (height - qrboxSize.height) / 2,\n      width: qrboxSize.width,\n      height: qrboxSize.height\n    };\n  };\n  Html5Qrcode.prototype.possiblyInsertShadingElement = function (element, width, height, qrboxSize) {\n    if (width - qrboxSize.width < 1 || height - qrboxSize.height < 1) {\n      return;\n    }\n    var shadingElement = document.createElement(\"div\");\n    shadingElement.style.position = \"absolute\";\n    var rightLeftBorderSize = (width - qrboxSize.width) / 2;\n    var topBottomBorderSize = (height - qrboxSize.height) / 2;\n    shadingElement.style.borderLeft = rightLeftBorderSize + \"px solid rgba(0, 0, 0, 0.48)\";\n    shadingElement.style.borderRight = rightLeftBorderSize + \"px solid rgba(0, 0, 0, 0.48)\";\n    shadingElement.style.borderTop = topBottomBorderSize + \"px solid rgba(0, 0, 0, 0.48)\";\n    shadingElement.style.borderBottom = topBottomBorderSize + \"px solid rgba(0, 0, 0, 0.48)\";\n    shadingElement.style.boxSizing = \"border-box\";\n    shadingElement.style.top = \"0px\";\n    shadingElement.style.bottom = \"0px\";\n    shadingElement.style.left = \"0px\";\n    shadingElement.style.right = \"0px\";\n    shadingElement.id = \"\" + Constants.SHADED_REGION_ELEMENT_ID;\n    if (width - qrboxSize.width < 11 || height - qrboxSize.height < 11) {\n      this.hasBorderShaders = false;\n    } else {\n      var smallSize = 5;\n      var largeSize = 40;\n      this.insertShaderBorders(shadingElement, largeSize, smallSize, -smallSize, null, 0, true);\n      this.insertShaderBorders(shadingElement, largeSize, smallSize, -smallSize, null, 0, false);\n      this.insertShaderBorders(shadingElement, largeSize, smallSize, null, -smallSize, 0, true);\n      this.insertShaderBorders(shadingElement, largeSize, smallSize, null, -smallSize, 0, false);\n      this.insertShaderBorders(shadingElement, smallSize, largeSize + smallSize, -smallSize, null, -smallSize, true);\n      this.insertShaderBorders(shadingElement, smallSize, largeSize + smallSize, null, -smallSize, -smallSize, true);\n      this.insertShaderBorders(shadingElement, smallSize, largeSize + smallSize, -smallSize, null, -smallSize, false);\n      this.insertShaderBorders(shadingElement, smallSize, largeSize + smallSize, null, -smallSize, -smallSize, false);\n      this.hasBorderShaders = true;\n    }\n    element.append(shadingElement);\n  };\n  Html5Qrcode.prototype.insertShaderBorders = function (shaderElem, width, height, top, bottom, side, isLeft) {\n    var elem = document.createElement(\"div\");\n    elem.style.position = \"absolute\";\n    elem.style.backgroundColor = Constants.BORDER_SHADER_DEFAULT_COLOR;\n    elem.style.width = width + \"px\";\n    elem.style.height = height + \"px\";\n    if (top !== null) {\n      elem.style.top = top + \"px\";\n    }\n    if (bottom !== null) {\n      elem.style.bottom = bottom + \"px\";\n    }\n    if (isLeft) {\n      elem.style.left = side + \"px\";\n    } else {\n      elem.style.right = side + \"px\";\n    }\n    if (!this.borderShaders) {\n      this.borderShaders = [];\n    }\n    this.borderShaders.push(elem);\n    shaderElem.appendChild(elem);\n  };\n  Html5Qrcode.prototype.showPausedState = function () {\n    if (!this.scannerPausedUiElement) {\n      throw \"[internal error] scanner paused UI element not found\";\n    }\n    this.scannerPausedUiElement.style.display = \"block\";\n  };\n  Html5Qrcode.prototype.hidePausedState = function () {\n    if (!this.scannerPausedUiElement) {\n      throw \"[internal error] scanner paused UI element not found\";\n    }\n    this.scannerPausedUiElement.style.display = \"none\";\n  };\n  Html5Qrcode.prototype.getTimeoutFps = function (fps) {\n    return 1000 / fps;\n  };\n  return Html5Qrcode;\n}();\nexport { Html5Qrcode };","map":{"version":3,"names":["BaseLoggger","Html5QrcodeResultFactory","Html5QrcodeErrorFactory","Html5QrcodeSupportedFormats","isValidHtml5QrcodeSupportedFormats","Html5QrcodeConstants","isNullOrUndefined","Html5QrcodeStrings","VideoConstraintsUtil","Html5QrcodeShim","CameraFactory","CameraRetriever","StateManagerFactory","Html5QrcodeScannerState","Constants","_super","__extends","DEFAULT_WIDTH","DEFAULT_WIDTH_OFFSET","FILE_SCAN_MIN_HEIGHT","FILE_SCAN_HIDDEN_CANVAS_PADDING","MIN_QR_BOX_SIZE","SHADED_LEFT","SHADED_RIGHT","SHADED_TOP","SHADED_BOTTOM","SHADED_REGION_ELEMENT_ID","VERBOSE","BORDER_SHADER_DEFAULT_COLOR","BORDER_SHADER_MATCH_COLOR","InternalHtml5QrcodeConfig","config","logger","fps","SCAN_DEFAULT_FPS","disableFlip","DEFAULT_DISABLE_FLIP","qrbox","aspectRatio","videoConstraints","prototype","isMediaStreamConstraintsValid","logError","isShadedBoxEnabled","create","Html5Qrcode","elementId","configOrVerbosityFlag","element","canvasElement","scannerPausedUiElement","hasBorderShaders","borderShaders","qrMatch","renderedCamera","qrRegion","context","lastScanImageFile","isScanning","document","getElementById","verbose","experimentalFeatureConfig","configObject","experimentalFeatures","qrcode","getSupportedFormats","getUseBarCodeDetectorIfSupported","foreverScanTimeout","shouldScan","stateManagerProxy","start","cameraIdOrConfig","configuration","qrCodeSuccessCallback","qrCodeErrorCallback","_this","qrCodeErrorCallbackInternal","log","internalConfig","clearElement","videoConstraintsAvailableAndValid","areVideoConstraintsEnabled","rootElementWidth","clientWidth","style","position","$this","toScanningStateChangeTransaction","startTransition","SCANNING","Promise","resolve","reject","createVideoConstraints","cancel","cameraRenderingOptions","renderingCallbacks","onRenderSurfaceReady","viewfinderWidth","viewfinderHeight","setupUi","foreverScan","failIfNotSupported","then","factory","camera","render","execute","catch","error","errorGettingUserMedia","_","cameraStreamingNotSupported","pause","shouldPauseVideo","isStrictlyScanning","directTransition","PAUSED","showPausedState","resume","isPaused","transitionToScanning","hidePausedState","getState","stop","toStoppedStateTransaction","NOT_STARTED","clearTimeout","removeQrRegion","childElement","removeChild","close","scanFile","imageFile","showImage","scanFileV2","html5qrcodeResult","decodedText","File","canScanFile","possiblyCloseLastScanImageFile","URL","createObjectURL","inputImage","Image","onload","imageWidth","width","imageHeight","height","containerWidth","containerHeight","Math","max","clientHeight","computeCanvasDrawConfig","visibleCanvas","createCanvasElement","display","appendChild","context_1","getContext","canvas","drawImage","x","y","padding","hiddenImageWidth","hiddenImageHeight","hiddenCanvasWidth","hiddenCanvasHeight","hiddenCanvas","decodeRobustlyAsync","result","createFromQrcodeResult","exception","onerror","onabort","onstalled","onsuspend","src","clear","getCameras","retrieve","getRunningTrackCapabilities","getRenderedCameraOrFail","getRunningTrackSettings","getRunningTrackCameraCapabilities","getCapabilities","applyVideoConstraints","videoConstaints","allFormats","QR_CODE","AZTEC","CODABAR","CODE_39","CODE_93","CODE_128","DATA_MATRIX","MAXICODE","ITF","EAN_13","EAN_8","PDF_417","RSS_14","RSS_EXPANDED","UPC_A","UPC_E","UPC_EAN_EXTENSION","formatsToSupport","Array","isArray","length","supportedFormats","_i","_a","format","push","warn","useBarCodeDetectorIfSupported","validateQrboxSize","qrboxSize","validateQrboxConfig","qrDimensions","toQrdimensions","validateMinSize","size","correctWidthBasedOnRootElementSize","configWidth","undefined","Error","shouldShadingBeApplied","defaultQrRegion","getShadedRegionBounds","contextAttributes","willReadFrequently","append","possiblyInsertShadingElement","createScannerPausedUiElement","rootElement","createElement","innerText","top","zIndex","background","textAlign","scanContext","decodeAsync","text","possiblyUpdateShaders","errorMessage","codeParseError","createFrom","videoElement","getSurface","widthRatio","videoWidth","heightRatio","videoHeight","sWidthOffset","sHeightOffset","sxOffset","syOffset","triggerNextScan","setTimeout","getTimeoutFps","isSuccessfull","translate","scale","finally","deviceId","exact","facingModeKey","deviceIdKey","allowedFacingModeValues_1","exactKey","isValidFacingModeValue","value","keys","Object","key","facingMode","type_1","type_2","type","xoffset","yoffset","formerImageWidth","formerImageHeight","innerHTML","forEach","shader","backgroundColor","revokeObjectURL","customId","canvasWidth","canvasHeight","id","shadingElement","rightLeftBorderSize","topBottomBorderSize","borderLeft","borderRight","borderTop","borderBottom","boxSizing","bottom","left","right","smallSize","largeSize","insertShaderBorders","shaderElem","side","isLeft","elem"],"sources":["../../src/html5-qrcode.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}